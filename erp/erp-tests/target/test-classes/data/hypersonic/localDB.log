CREATE USER SA PASSWORD "" ADMIN
/*C1*/SET SCHEMA PUBLIC
CONNECT USER SA
/*C2*/SET SCHEMA PUBLIC
CONNECT USER SA
SET AUTOCOMMIT FALSE
CREATE TABLE JBM_USER (USER_ID VARCHAR(32) NOT NULL, PASSWD VARCHAR(32) NOT NULL, CLIENTID VARCHAR(128), PRIMARY KEY(USER_ID))
CREATE TABLE JBM_ROLE (ROLE_ID VARCHAR(32) NOT NULL, USER_ID VARCHAR(32) NOT NULL, PRIMARY KEY(USER_ID, ROLE_ID))
INSERT INTO JBM_ROLE VALUES('subscriber','john')
COMMIT
INSERT INTO JBM_ROLE VALUES('john','guest')
COMMIT
INSERT INTO JBM_ROLE VALUES('noacc','nobody')
COMMIT
INSERT INTO JBM_ROLE VALUES('j2ee','guest')
COMMIT
INSERT INTO JBM_ROLE VALUES('durpublisher','dynsub')
COMMIT
INSERT INTO JBM_ROLE VALUES('guest','guest')
COMMIT
INSERT INTO JBM_ROLE VALUES('durpublisher','john')
COMMIT
INSERT INTO JBM_USER VALUES('dynsub','dynsub',NULL)
COMMIT
INSERT INTO JBM_ROLE VALUES('publisher','dynsub')
COMMIT
INSERT INTO JBM_USER VALUES('nobody','nobody',NULL)
COMMIT
INSERT INTO JBM_ROLE VALUES('publisher','john')
COMMIT
INSERT INTO JBM_USER VALUES('john','needle','DurableSubscriberExample')
COMMIT
INSERT INTO JBM_USER VALUES('j2ee','j2ee',NULL)
COMMIT
INSERT INTO JBM_USER VALUES('guest','guest',NULL)
COMMIT
CREATE TABLE JBM_DUAL (DUMMY INTEGER)
CREATE TABLE JBM_MSG_REF (CHANNEL_ID BIGINT, MESSAGE_ID BIGINT, TRANSACTION_ID BIGINT, STATE CHAR(1), ORD BIGINT, PAGE_ORD BIGINT, DELIVERY_COUNT INTEGER, SCHED_DELIVERY BIGINT, PRIMARY KEY(CHANNEL_ID, MESSAGE_ID))
CREATE INDEX JBM_MSG_REF_TX ON JBM_MSG_REF (TRANSACTION_ID)
CREATE INDEX JBM_MSG_REF_ORD ON JBM_MSG_REF (ORD)
CREATE INDEX JBM_MSG_REF__PAGE_ORD ON JBM_MSG_REF (PAGE_ORD)
CREATE INDEX JBM_MSG_REF_MESSAGE_ID ON JBM_MSG_REF (MESSAGE_ID)
CREATE INDEX JBM_MSG_REF_SCHED_DELIVERY ON JBM_MSG_REF (SCHED_DELIVERY)
CREATE TABLE JBM_MSG (MESSAGE_ID BIGINT, RELIABLE CHAR(1), EXPIRATION BIGINT, TIMESTAMP BIGINT, PRIORITY TINYINT, TYPE TINYINT, INS_TIME BIGINT, HEADERS LONGVARBINARY, PAYLOAD LONGVARBINARY, PRIMARY KEY (MESSAGE_ID))
CREATE INDEX JBM_MSG_REF_TIMESTAMP ON JBM_MSG (TIMESTAMP)
CREATE TABLE JBM_TX (NODE_ID INTEGER, TRANSACTION_ID BIGINT, BRANCH_QUAL VARBINARY(254), FORMAT_ID INTEGER, GLOBAL_TXID VARBINARY(254), PRIMARY KEY (TRANSACTION_ID))
CREATE TABLE JBM_COUNTER (NAME VARCHAR(255), NEXT_ID BIGINT, PRIMARY KEY(NAME))
INSERT INTO JBM_DUAL VALUES(1)
COMMIT
INSERT INTO JBM_COUNTER VALUES('MESSAGE_ID',4096)
COMMIT
INSERT INTO JBM_COUNTER VALUES('CHANNEL_ID',10)
COMMIT
INSERT INTO JBM_COUNTER VALUES('TRANSACTION_ID',1024)
COMMIT
CREATE TABLE JBM_POSTOFFICE (POSTOFFICE_NAME VARCHAR(255), NODE_ID INTEGER,QUEUE_NAME VARCHAR(255), CONDITION VARCHAR(1023), SELECTOR VARCHAR(1023), CHANNEL_ID BIGINT, CLUSTERED CHAR(1), ALL_NODES CHAR(1), PRIMARY KEY(POSTOFFICE_NAME, NODE_ID, QUEUE_NAME))
INSERT INTO JBM_POSTOFFICE VALUES('JMS post office',0,'DLQ','queue.DLQ',NULL,0,'N','N')
COMMIT
INSERT INTO JBM_POSTOFFICE VALUES('JMS post office',0,'ExpiryQueue','queue.ExpiryQueue',NULL,1,'N','N')
COMMIT
